<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู - ุดุฑูุฉ ุงูููุฑุจุงุก ุงูุณุนูุฏูุฉ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/f5.css') }}">
    <!-- ุณูุณุชุฎุฏู ููุชุจุฉ XLSX ูุชุตุฏูุฑ Excel ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="{{ url_for('static', filename='js/f5.js') }}" defer></script>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="header-right">
                <div class="logo">โก</div>
                <div class="header-title">
                    <h1>ูุธุงู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู</h1>
                    <p>ููุญุฉ ุชุญูู ุงูููุธู</p>
                </div>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">{{ user.fullname[0] if user.fullname else '?' }}</div>
                <div class="user-details">
                    <h3 id="userName">{{ user.fullname }}</h3>
                    <p id="userEmail">{{ user.email }}</p>
                </div>
                <a href="{{ url_for('logout') }}" class="logout-btn" id="logoutBtn">ุชุณุฌูู ุงูุฎุฑูุฌ</a>
            </div>
        </div>

                {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="message {{ category }} show">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <div class="message" id="message"></div>

        <div class="main-content">
            <div class="card">
                <div class="card-icon">โฐ</div>
                <h2>ุชุณุฌูู ุงูุญุถูุฑ/ุงูุงูุตุฑุงู</h2>
                <div class="time-display" id="currentTime">00:00:00</div>
                <div class="date-display" id="currentDate">ุงูุฎููุณุ 16 ุฃูุชูุจุฑ 2025</div>
                <button class="attendance-btn btn-checkin" id="checkInBtn">ุชุณุฌูู ุงูุญุถูุฑ</button>
                <button class="attendance-btn btn-checkout" id="checkOutBtn" disabled>ุชุณุฌูู ุงูุงูุตุฑุงู</button>
                <div class="status-badge status-inactive" id="statusBadge">ูู ูุชู ุชุณุฌูู ุงูุญุถูุฑ ุจุนุฏ</div>
            </div>

            <div class="card">
                <div class="card-icon">๐</div>
                <h2>ููุฎุต ุงูููู</h2>
                <div class="time-display" id="checkInTime">--:--</div>
                <div class="date-display">ููุช ุงูุญุถูุฑ</div>
                <div class="time-display" id="checkOutTime">--:--</div>
                <div class="date-display">ููุช ุงูุงูุตุฑุงู</div>
            </div>
        </div>

        <div class="history-section">
            <div class="history-header">
                <h2>ุณุฌู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู</h2>
                <div class="action-buttons">
                    <button class="excel-btn" id="exportExcelBtn">
                        ุชุตุฏูุฑ Excel
                    </button>
                    <button class="clear-btn" id="clearHistoryBtn" style="display: none;">ูุณุญ ุงูุณุฌู (ููุชุฌุฑุจุฉ)</button>
                </div>
            </div>

            <div class="table-responsive">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุช</th>
                            <th>ุงูููุน</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- ุณูุชู ููุก ูุฐุง ุจูุงุณุทุฉ JavaScript -->
                    </tbody>
                </table>
                <p class="empty-message" id="emptyMessage">ูุง ููุฌุฏ ุณุฌูุงุช ุญุถูุฑ ูุงูุตุฑุงู ุญุชู ุงูุขู.</p>
            </div>
        </div>
    </div>
</body>

</html>
